---
title: "Homework 4"
author: "Andrew Harvey"
date: "25 June 2024"
format: html
editor: visual
---
```{r Load Libraries, warning=FALSE}
library(tidyverse)
```
# Task 1: Conceptual Questions

## Questions

1. What is the purpose of the lapply() function? What is the equivalent purrr function?

+ <mark>The lapply() function takes in a list, and a function then applys the function to each element of the list, it then returns a list where each element is the output from the function. The equivalent purr function is map().<mark>

2. Suppose we have a list called my_list. Each element of the list is a numeric data frame (all columns are numeric). We want use lapply() to run the code cor(numeric_matrix, method = "kendall") on each element of the list. Write code to do this below! (Iâ€™m really trying to ask you how you specify method = "kendall" when calling lapply()).

+ <mark> lapply(my_list, FUN = cor, method = "kendall") <mark>

3. What are two advantages of using purrr functions instead of the BaseR apply family?

+ <mark> The first advantage is that the purr functions are consistent while the apply family is not. Hadley gives the example of `lapply()` and `mapply()` where `lappy()` has the first argument being data and `mapply()` has the function as the first argument. Purr functions always have data as the first argument. Second, you can predict the output of the purr functions where the same can not be said for the apply family functions. [Source](https://stackoverflow.com/questions/45101045/why-use-purrrmap-instead-of-lapply) <mark>

4. What is a side-effect function?

+ <mark> A side-effect function is a function where some output or other task is presented but nothing is done to the data. `Print()`, `cat()`, and  `plot()` are examples of side-effect functions.<mark>

5. Why can you name a variable sd in a function and not cause any issues with the sd function?

+ <mark> A variable can be named sd within a function and not cause issues with the sd function because the sd within your function is local to your function's environment while the sd function exists within the stats package which is a parent environment. <mark>


# Task 2:

1. 1. When we start doing machine learning later in the course, a common metric used to evaluate predictions is called Root Mean Square Error (RMSE). For a given set of responses, $y_1$, ..., $y_n$ (variable of interest that we want to predict) and a set of corresponding predictions for those observations, $\hat{y_1}$, ..., $\hat{y_n}$ the RMSE is defined as 

$$RMSE = \sqrt{\frac{1}{n}\sum_{i=1}^{n}(y_i-\hat{y_i})^2}$$
Write a basic function (call it getRMSE()) that takes in a *vector* of responses and a *vector* of predictions and outputs the RMSE.

```{r RMSE Function}
getRMSE<-function(vec1,vec2,...){
  mean<- mean(vec1,...)
  rmse <- sqrt(1/length(vec1)*((mean(vec1-vec2))^2))
  rmse
}

set.seed(10)
n <- 100
x <- runif(n)
resp <- 3 + 10*x + rnorm(n)
pred <- predict(lm(resp ~ x), data.frame(x))


getRMSE(resp,pred)

for (i in 1:2) {
  j<-sample(1:100,1)
  resp[j]<-NA_real_
}
resp

getRMSE(resp,pred)

getRMSE(resp,pred,na.rm=TRUE)
```

